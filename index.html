<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Scratchblocks Image Link Generator</title>
  <script src="https://scratchblocks.github.io/js/scratchblocks-v3.4-min.js"></script>
</head>
<body>
  <h1>Scratchblocks Image Link Generator</h1>
  <textarea id="code" rows="10" cols="50">
when green flag clicked
say [Hello!]
  </textarea><br>
  <button onclick="generate()">Générer l'image</button>
  <div id="output"></div>

  <script>
    function generate() {
      var code = document.getElementById("code").value;
      var outputDiv = document.getElementById("output");
      outputDiv.innerHTML = '';

      // Générer le bloc
      var blocks = scratchblocks.render(code, { style: "scratch3" });
      outputDiv.appendChild(blocks);

      // Convertir en image (canvas)
      html2canvas(blocks).then(function(canvas) {
        var dataURL = canvas.toDataURL("image/png");
        var link = document.createElement("a");
        link.href = dataURL;
        link.target = "_blank";
        link.textContent = "Voir l'image du script";
        outputDiv.appendChild(document.createElement("br"));
        outputDiv.appendChild(link);
      });
    }
  </script>

  <!-- html2canvas pour convertir en image -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>
